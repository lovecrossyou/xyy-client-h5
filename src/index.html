<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>鑫翼优</title>
  <link rel="stylesheet" href="/static/css/reset.css">
</head>

<body>
  <script src="//webapi.amap.com/maps?v=1.4.3&key=51b48771e71efce7d5be04bead9dd9a4&plugin=AMap.Geolocation"></script>
  <script src="//as.alipayobjects.com/g/component/fastclick/1.0.6/fastclick.js"></script>
  <script src="//g.alicdn.com/fdilab/lib3rd/viewport-units-buggyfill/0.6.2/??viewport-units-buggyfill.hacks.min.js,viewport-units-buggyfill.min.js"></script>
  <script type="text/javascript" src="//cdn.staticfile.org/jquery/3.3.1/jquery.min.js"></script>
  <script type="text/javascript" src="https://res.wx.qq.com/open/js/jweixin-1.3.2.js"></script>
  <div id="root"></div>


  <script>
    window.viewportUnitsBuggyfill.init({
      hacks: window.viewportUnitsBuggyfillHacks
    });
    if ('addEventListener' in document) {
      document.addEventListener('DOMContentLoaded', function () {
        FastClick.attach(document.body);
      }, false);
    }
    $(document).ready(function () {
      isWxMini = window.__wxjs_environment === 'miniprogram';

      $('#root').on('click', '.buttom_container_pay', function () {
        var data = $(this).attr('data');
        console.log('支付', JSON.parse(data));
        wx.miniProgram.postMessage({
          data: JSON.parse(data)
        });
        wx.miniProgram.redirectTo({
          url: '/pages/index/pay?xxx=123'
        });
      });
      $('#root').on('click', '.navbackWechat', function () {
        console.log('返回');
        // let params = {
        //   "openId": "oLtGG5N9Q6MudlWkU1O4fVavNQGg",
        //   "payChannel": "WeixinMiniProgramPay",
        //   "payOrderNo": "20190213191419096316"
        // }
        // // $.post('/h5/client/keplerPay/confirm',JSON.stringify(params),function(res){
        // //     console.log(JSON.stringify(res));
        // // });
        // var sendData = {
        //   openId: "oLtGG5N9Q6MudlWkU1O4fVavNQGg",
        //   payChannel: "WeixinMiniProgramPay",
        //   payOrderNo: "20190213191419096316"
        // };
        // $.ajax({
        //   url: "/h5/client/keplerPay/confirm",
        //   type: 'post',
        //   dataType: 'json',
        //   contentType: "application/json",
        //   async: true, //异步请求
        //   cache: false,
        //   data: JSON.stringify(sendData), //使用变量sendData
        //   //执行成功的回调函数
        //   success: function (data) {
        //     console.log(JSON.stringify(data))
        //   },
        //   //执行失败或错误的回调函数
        //   error: function (data) {
        //     alert("认证失败");
        //   }
        // });
        wx.miniProgram.reLaunch({
          url: '/pages/index/index'
        });
      });

    });

  </script>
</body>

</html>
